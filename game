#!/usr/bin/env ruby
require 'optparse'
require_relative 'lib/game'

command = ARGV[0]


# name = ARGV[1]
options = {}

OptionParser.new do |opts|
  opts.banner = "Usage: game [command] [options]"

  opts.on("--min [MIN]", "The minimum number of players") do |min|
    options[:min] = min
  end

  opts.on("--max [MAX]", "The maximum number of players") do |max|
    options[:max] = max
  end

  opts.on("--time [TIME]", "The playing time") do |time|
    options[:time] = time
  end

  opts.on("--desc [DESC]", "The description") do |desc|
    options[:desc] = desc
  end

  opts.on("--friends [FRIENDS]", "A list of friends") do |friends|
    friends = friends.split(',')
    options[:friends] = friends.map{|name| name.strip}
  end
end.parse!

case command.downcase
when "add", "remove", "update"
  # User is trying to add, remove or update a game
  name = ARGV[1]
  if name.nil? or name.empty?
    puts "Must provide a name"
    exit
  end
  options[:name] = name
  Game.send(command.to_sym, options)
else
  puts "unknown"
end
